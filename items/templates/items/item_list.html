{% extends 'base.html' %}

{% block content %}
<style>
    .address-filter {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        margin: 30px 0px;
    }

    .address-filter button {
        margin-top: 15px;
        margin-left: 4px;
        height: 44px;
        width: 44px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .address-filter:hover button {
        background: #2196F3 !important;
        color: white !important;
    }

    .address-filter p {
        margin: 0px !important;
    }

    .post {
        border-radius: 8px;
        border: 1px solid gray;
        box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.2), 0 4px 20px 0 rgba(0, 0, 0, 0.19);
        margin-bottom: 50px;
    }

    .post .top {
        display: grid;
        grid-template-columns: auto 1fr;
        padding: 8px;
    }

    .post .links {
        padding: 8px;
    }

    .post .top>div {
        display: flex;
        align-items: center;
    }

    .post .text {
        padding: 0px 8px 8px 8px;
    }

    .post .text p {
        margin: 5px 0px;
    }

    .post .top img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 100%;
    }

    .post .top p {
        margin: 0px;
    }

    .post .top div {
        margin-left: 8px;
    }

    .post .item-pic {
        width: 100%;
        height: 250px;
        object-fit: cover;
    }
</style>

<article class="inside-art w3-container">
    <div class="w3-content">
        <form method="get" class="address-filter">
            <p>
                <label for="address">Filter Address:</label>
                <input type="text" name="address" value="{{ request.GET.address }}" />
            </p>
            <button type="submit" class="w3-button w3-gray w3-round"><i class="fas fa-search-location"></i></button>
        </form>
        {% for i in items %}
        <div class="post">
            <div class="top">
                <img src="{{ i.user.photo.url }}">
                <div>
                    <p class="w3-large"><b class="w3-text-pink">{{ i.user.name }}</b> from <b>{{ i.user.address }}</b>
                        <br><span class="w3-small"><i class="far fa-clock"></i>
                            {{ i.date }}</span></p>
                </div>
            </div>
            <div class="text">
                <p>Hi! Can someone please buy me <b>"{{ i.name }}"</b>?</p>
                <p>{{ i.description }}</p>
                <p>My expected price for this is <b>Php {{ i.expected_price }}</b>. I think, you can buy this at
                    "<b>{{ i.expected_store }}</b>".</p>
            </div>
            <img src="{{ i.photo.url }}" class="item-pic">
            <div class="w3-right-align links">
                <a href="{% url 'item-detail' pk=i.pk %}" class="w3-button w3-card w3-green w3-round-large">View</a>
            </div>
        </div>
        {% endfor %}

        <div class="pagination">
            <span class="step-links">
                {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                <span class="current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    </div>
</article>
{% endblock %}